"use strict";(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[218],{30218:(t,e,i)=>{i.d(e,{A:()=>b});var s=i(59440),o=i(67373),n=i(17228),a=i(22902),r=i(52900),h=i(10811);function l(t,e,i){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?s:s+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class d extends o.A{constructor(t){super(t),l(this,"onResize",()=>{const{image:t}=this.ref;(0,h.h)(t)?t.style.display="block":n.A.loadLazy(t,{load:!0,forceImageUpdate:!0,...this.props.imageLoadMode}),this.updateCaptionPosition()});const{node:e,regionSelector:i,imageSelector:s,imageWrapperSelector:o,videoWrapperSelector:r,captionSelector:d}=this.props;this.state={},this.node=e,this.ref={region:e.querySelector(i),image:e.querySelector(s),caption:e.querySelector(d)},this.isVideo=null!==this.ref.image.closest(r),this.ref.wrapper=o?this.ref.image.closest(o):this.ref.image.parentNode,this.slideUrl=this.node.dataset.slideUrl,this.slideId=this.node.dataset.itemId,this.state={isActive:!1,isVideo:!1,...(0,a.pG)(this.ref.image),focalPoint:(0,a.TT)(this.ref.image)},this.activeTimeout=null,this.transitionTimeout=null,this.ref.image.onload=()=>{this.ref.wrapper.dataset.loaded=!0,this.updateCaptionPosition()}}updateCaptionPosition(){const{caption:t}=this.ref;t&&((0,r.A)()?t.style.top=this.calculateMobileCaptionPosition():t.style.removeProperty("top"))}calculateMobileCaptionPosition(){const{image:t,region:e}=this.ref,i=e.clientHeight,s=i/2+t.clientHeight/2;return`${Math.round(s/i*100)}%`}loadImage(){const{image:t}=this.ref;(0,h.h)(t)?t.onload():n.A.loadLazy(t,{load:!0,...this.props.imageLoadMode})}add(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{switchDelay:i}=this.props;this.loadImage(),this.node.dataset.active=!1,this.node.dataset.next=t,this.node.dataset.static=e,this.node.parentNode&&this.node.parentNode.appendChild(this.node),this.setState({isActive:!0,isVideo:this.isVideo}),this.updateCaptionPosition(),clearTimeout(this.activeTimeout),clearTimeout(this.transitionTimeout),this.activeTimeout=setTimeout(()=>{this.node.dataset.active=!0},0),e?this.node.dataset.in=!0:this.transitionTimeout=setTimeout(()=>{this.node.dataset.in=!0},i)}remove(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{transitionDuration:i}=this.props;if(this.node.dataset.next=!t,this.node.dataset.in=!1,this.node.dataset.static=e,clearTimeout(this.activeTimeout),clearTimeout(this.transitionTimeout),e)return this.setState({isActive:!1}),void(this.node.dataset.active=!1);this.transitionTimeout=setTimeout(()=>{this.setState({isActive:!1}),this.node.dataset.active=!1},e?0:i)}destroy(){clearTimeout(this.activeTimeout),clearTimeout(this.transitionTimeout)}}l(d,"defaultProps",{node:null,regionSelector:".gallery-slideshow-item-wrapper",imageSelector:"img",videoWrapperSelector:".sqs-video-wrapper",captionSelector:".gallery-caption-slideshow",isLightbox:!1,switchDelay:0,transitionDuration:500,imageLoadMode:{},isVideo:!1});var p=i(91833),c=i(68651),u=i(75396),g=i(82e3),m=i(49099),v=i(63285);function y(t,e,i){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?s:s+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class b extends o.A{constructor(t){super(t),y(this,"onSwipe",t=>{console.log(t)}),y(this,"getSlideIndexByUrlOrId",t=>this.slides.findIndex(e=>e.slideId===t||e.slideUrl===t)),y(this,"getSlides",(t,e)=>{let{regionSelector:i,imageSelector:s,switchDelay:o,transitionDuration:n,imageLoadMode:a,isInstant:r,imageWrapperSelector:h}=e;return t.map(t=>new d({node:t,regionSelector:i,imageSelector:s,switchDelay:o,transitionDuration:n,imageLoadMode:a,isInstant:r,imageWrapperSelector:h}))}),y(this,"onDisableMove",t=>{t.preventDefault()}),y(this,"onPreviousSlide",t=>{this.setTargetSlide(this.state.index-1,!1,!1,this.state.isInstant),t&&t.preventDefault&&t.preventDefault()}),y(this,"onNextSlide",t=>{this.setTargetSlide(this.state.index+1,!0,!1,this.state.isInstant),t&&t.preventDefault&&t.preventDefault()}),y(this,"onCloseLightbox",t=>{this.closeLightbox()}),y(this,"keyCodeListener",t=>{if(27===t.keyCode&&(this.closeLightbox(),t.stopPropagation()),39===t.keyCode){const t=this.state.index+1;this.setSlide(t,!1,this.state.isInstant)}if(37===t.keyCode){const t=this.state.index-1;this.setSlide(t,!1,this.state.isInstant)}}),y(this,"initAutoplay",t=>{this.autoplayInterval=setInterval(()=>{const t=this.state.index+1;this.setSlide(t,!1,this.state.isInstant)},t)}),y(this,"onHistoryStateChange",()=>{const t=this.matchUrlToSlideIndex(),{isLightboxOpen:e}=this.state;-1===t&&e?this.closeLightbox({adjustHistory:!1}):t>-1&&!e&&this.openLightbox(t)}),y(this,"onResize",()=>{const{sizedWrapper:t}=this,{aspectRatio:e}=this.state;e&&(t.style.height=t.clientWidth*e+"px"),this.loadSlides()}),y(this,"loadSlides",()=>{const{index:t,controls:e}=this.state;if(-1===t)return;let i;if("bullets"===e)i=this.slides.map((t,e)=>e);else{const e=this.slides.length;i=[t,(e+t-1)%e,(e+t+1)%e]}i.forEach(t=>this.slides[t].onResize())});const{node:e,display:i,isHistoryEnabled:o,isLightbox:n,autoplayEnabled:a,slideDurationMs:r,slides:h,aspectRatio:l,isInstant:c,galleryHeight:m,galleryWidth:b,controls:S,thumbnailsEnabled:w,sizedWrapper:f}=this.props,x=(0,s.T)(window,"Static.SQUARESPACE_CONTEXT.collection.fullUrl",null);this.node=e,this.display=i||e,this.sizedWrapper=f||this.display,this.history=(0,g.J)(),this.state={collectionFullUrl:x,isHistoryEnabled:x&&o&&this.history,aspectRatio:l,autoplayEnabled:a,slideDurationMs:r,galleryHeight:m,galleryWidth:b,isInstant:c,controls:S,thumbnailsEnabled:w,index:0,previous:-1,isLightboxOpen:!1},this.onResizeDebounce=(0,u.A)(this.onResize,v.X0),this.slides=this.getSlides(h,this.props),this.lightbox=this.node.querySelector(".gallery-lightbox"),this.state.index=this.matchUrlToSlideIndex(),this.autoplayInterval=null,this.len=this.slides.length,this.len&&(this.swipe=new p.A({axis:"xy",node:this.display,onSwipeRight:this.onPreviousSlide,onSwipeLeft:this.onNextSlide,onSwipeUp:n&&this.onCloseLightbox}),this.bindListeners(),this.checkLightboxReady(),this.state.autoplayEnabled&&this.initAutoplay(this.state.slideDurationMs))}checkLightboxReady(){const{isLightbox:t}=this.props;if(!t)return-1===this.state.index&&(this.state.index=0),void this.setTargetSlide(this.state.index);this.state.index>-1&&this.openLightbox(this.state.index)}matchUrlToSlideIndex(){const{collectionFullUrl:t}=this.state;if(-1===!window.location.pathname.indexOf(t))return-1;const e=new URLSearchParams(window.location.search).get("itemId");return this.getSlideIndexByUrlOrId(e)}bindListeners(){const{isLightbox:t,buttonPrevious:e,buttonNext:i,buttonLightboxClose:s}=this.props;e&&e.addEventListener("click",this.onPreviousSlide),i&&i.addEventListener("click",this.onNextSlide),t&&(this.lightbox.addEventListener("touchmove",this.onDisableMove),s&&s.addEventListener("click",this.onCloseLightbox),this.history&&this.history.change.on(this.onHistoryStateChange)),c.A.on(this.onResizeDebounce)}unbindListeners(){const{isLightbox:t,buttonPrevious:e,buttonNext:i}=this.props;e&&e.removeEventListener("click",this.onPreviousSlide),i&&i.removeEventListener("click",this.onNextSlide),t&&this.lightbox.removeEventListener("touchmove",this.onDisableMove),t&&this.history&&this.history.change.off(this.onHistoryStateChange),c.A.off(this.onResizeDebounce)}setSlide(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;t!==this.state.index&&this.setTargetSlide(t,t>this.state.index,e,i)}setTargetSlide(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=(t%this.len+this.len)%this.len,n=this.slides[this.state.previous],a=this.slides[o];n&&n.remove(e,s),this.setState({index:o,previous:o}),a.add(e,s),a.state.isVideo&&this.lightbox?this.lightbox.classList.add("video-slide"):this.lightbox&&this.lightbox.classList.remove("video-slide"),this.setUrl(a.slideUrl),i||this.props.onSetSlide(o,e,s),this.onResizeDebounce()}setUrl(t){const{isLightbox:e}=this.props,{isHistoryEnabled:i}=this.state;e&&i&&history.replaceState({},"",`?itemId=${encodeURIComponent(t)}`)}openLightbox(t){if(this.state.isLightboxOpen)return;const{onLightboxOpen:e}=this.props;this.setState({isLightboxOpen:!0}),this.lightbox.dataset.open=!0,document.addEventListener("keyup",this.keyCodeListener),e(),this.setTargetSlide(t,!0,!1,this.state.isInstant)}closeLightbox(){let{adjustHistory:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onLightboxClose:e}=this.props;this.setState({index:-1,isLightboxOpen:!1}),t&&history.back(),this.lightbox.dataset.open=!1,document.removeEventListener("keyup",this.keyCodeListener),e()}refresh(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state.autoplayEnabled!==t.autoplayEnabled&&(!0===t.autoplayEnabled?this.initAutoplay(t.slideDurationMs):this.autoplayInterval&&clearInterval(this.autoplayInterval)),this.state.slideDurationMs!==t.slideDurationMs&&(clearInterval(this.autoplayInterval),this.initAutoplay(t.slideDurationMs)),this.setState({...t}),this.onResizeDebounce()}destroy(){this.onResizeDebounce.cancel(),this.unbindListeners(),this.autoplayInterval&&clearInterval(this.autoplayInterval),this.slides.forEach(t=>t.destroy()),this.swipe&&this.swipe.destroy(),this.slides=[],this.len=0}}y(b,"defaultProps",{isLightbox:!1,node:document.createElement("div"),display:null,sizedWrapper:null,buttonNext:document.createElement("button"),buttonPrevious:document.createElement("button"),buttonLightboxClose:document.createElement("button"),aspectRatio:null,slides:[],isHistoryEnabled:!0,autoplayEnabled:!1,slideDurationMs:5e3,galleryHeight:75,galleryWidth:80,regionSelector:".gallery-slideshow-item-wrapper",imageSelector:"img",switchDelay:0,transitionDuration:1e3,isInstant:!1,onSetSlide:m.l,onLightboxOpen:m.l,onLightboxClose:m.l})},52900:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(63285);function o(){const t=window.matchMedia(`(max-width: ${s.fi.md-1}px)`);return t&&t.matches}},91833:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(67373),o=i(73864),n=i(49099);function a(t,e,i){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?s:s+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class r extends s.A{constructor(t){super(t),a(this,"onPress",t=>{t.stopPropagation(),"number"==typeof t.button&&0!==t.button||this.startSwipe(t,this.normalizeMouseEvent(t))}),a(this,"onMove",t=>{const{axis:e,minSwipeLength:i,preventScroll:s}=this.props;if(s&&(t.preventDefault(),t.stopPropagation()),t.targetTouches&&t.targetTouches[0].identifier!==this.state.touchIdentifier)return;const o=this.getSwipeDirection(this.normalizeMouseEvent(t));s&&("xy"===e?t.preventDefault():"x"===e?o.swipeLengthX>=i&&t.preventDefault():o.swipeLengthY>=i&&t.preventDefault()),this.isSwipeDirectionUnchanged(o)?this.updateSwipe(o,this.normalizeMouseEvent(t)):this.resetSwipe()}),a(this,"onRelease",()=>{const t=this.getSwipeLength(this.state.pos),e=(new Date).getTime()-this.state.swipeStart.getTime();if(t>this.props.minSwipeLength&&e<=this.props.maxTimeThreshold){const t=(this.state.direction.y||"")+(this.state.direction.x||""),e=`onSwipe${t}`,i={type:`swipe${t}`,timestampStart:this.state.swipeStart,timestampEnd:new Date,start:this.state.start,end:this.state.pos,direction:this.state.direction};this.props.onSwipe&&this.props.onSwipe(i),this.props[e]&&this.props[e](i)}this.endSwipe()}),a(this,"getSwipeLength",t=>this.getSwipeLengthX(t)+this.getSwipeLengthY(t)),a(this,"getSwipeLengthX",t=>Math.abs(t.x-this.state.start.x)),a(this,"getSwipeLengthY",t=>Math.abs(t.y-this.state.start.y)),a(this,"isSwipeDirectionUnchanged",t=>!(this.state.direction.x&&this.state.direction.x!==t.x||this.state.direction.y&&this.state.direction.y!==t.y)),a(this,"normalizeMouseEvent",t=>{const e=(0,o.np)(t);return{x:e.clientX,y:e.clientY}});const{node:e}=this.props;this.state={touchIdentifier:null,direction:{x:null,y:null},pos:{x:null,y:null},start:{x:null,y:null},swipeStart:new Date},this.node=e,this.bindListeners()}bindListeners(){this.node.addEventListener(o.AZ.press,this.onPress)}unbindListeners(){this.node.removeEventListener(o.AZ.press,this.onPress)}getSwipeDirection(t){const e={...this.state.direction};return e.swipeLengthY=this.getSwipeLengthY(t),e.swipeLengthX=this.getSwipeLengthX(t),e.swipeLengthY>this.props.moveThreshold&&(e.y=t.y<this.state.start.y?"Up":"Down"),e.swipeLengthX>this.props.moveThreshold&&(e.x=t.x<this.state.start.x?"Left":"Right"),e}startSwipe(t,e){this.setState({touchIdentifier:t.targetTouches?t.targetTouches[0].identifier:null,direction:{x:null,y:null},start:e,pos:{x:null,y:null},swipeStart:new Date}),document.addEventListener(o.AZ.move,this.onMove),o.AZ.release.forEach(t=>{document.addEventListener(t,this.onRelease)})}endSwipe(){document.removeEventListener(o.AZ.move,this.onMove),o.AZ.release.forEach(t=>{document.removeEventListener(t,this.onRelease)})}updateSwipe(t,e){this.setState({direction:t,pos:e})}resetSwipe(){this.setState({touchIdentifier:null,direction:{x:null,y:null},pos:{x:null,y:null},start:{x:null,y:null},swipeStart:new Date})}destroy(){this.unbindListeners(),this.endSwipe()}}a(r,"defaultProps",{node:document.createElement("div"),axis:"xy",maxTimeThreshold:600,minSwipeLength:40,moveThreshold:100,preventScroll:!0,onSwipe:n.l,onSwipeLeft:n.l,onSwipeUpLeft:n.l,onSwipeUp:n.l,onSwipeUpRight:n.l,onSwipeRight:n.l,onSwipeDownRight:n.l,onSwipeDown:n.l,onSwipeDownLeft:n.l})},82e3:(t,e,i)=>{i.d(e,{J:()=>r});const s=Array.prototype.slice,o=function(){const t=s.call(arguments);return function(){let e=s.call(arguments);for(let i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},n=[],a={executeCallbacks(){n.forEach(t=>t())},trigger(){this.executeCallbacks()},registerCallback(t){t&&n.push(t)},removeCallback(t){if(t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}},on(t){this.registerCallback(t)},off(t){this.removeCallback(t)}};window.history&&window.history.pushState&&(history.change=a,history.pushState=o(()=>history.change.trigger(),history.pushState),history.replaceState=o(()=>history.change.trigger(),history.replaceState),window.addEventListener("popstate",()=>{history.change.trigger()}));const r=()=>window.history&&window.history.pushState?history:null},10811:(t,e,i)=>{i.d(e,{h:()=>s});const s=t=>!!t.dataset.loader},22902:(t,e,i)=>{i.d(e,{P6:()=>o,TT:()=>h,_v:()=>a,kr:()=>n,pG:()=>r});i(68444);var s=i(63285);const o=t=>{if(!t)return 1;if(!t.dataset.imageDimensions){const e=t.getAttribute("width"),i=t.getAttribute("height");return e&&i?+e/+i:1}const e=t.dataset.imageDimensions.split("x");return e[0]&&e[1]?+e[0]/+e[1]:void 0},n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t<=e)return t;const i=window.innerWidth;return i<=s.fi.sm?Math.max(e,Math.round(.25*t)):i<=s.fi.md?Math.max(e,Math.round(.5*t)):i<=s.fi.lg?Math.max(e,Math.round(.75*t)):t},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=window.innerWidth;let i=Math.max(1,t);return 1===i?i:e<=s.fi.sm?2:e<=s.fi.md?Math.max(Math.ceil(.5*i),2):e<=s.fi.lg?Math.ceil(.75*i):i},r=t=>{let e=0,i=0;const s={width:e,height:i};return t?(t.dataset.imageDimensions?[e,i]=t.dataset.imageDimensions.split("x"):(e=t.getAttribute("width"),i=t.getAttribute("height")),e&&i?{width:+e,height:+i}:s):s},h=t=>{const e={x:.5,y:.5};if(!t)return e;if(!t.dataset.imageFocalPoint)return e;const[i,s]=t.dataset.imageFocalPoint.split(",");return i&&s?{x:+i,y:+s}:e}}}]);