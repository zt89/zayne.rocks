(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[1546],{91546:(t,e,r)=>{"use strict";r.d(e,{A:()=>P});r(94226);var i=r(23029),n=r(92901),a=r(50388),o=r(53954),s=r(85501),u=r(64467),c=r(91028),p=r(76329),h=r(45299),v=r(65814),g=r(11561),l=r(80225),m=r(22131),f=r(89500);var d=r(47048),y=r.n(d);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach(function(e){(0,u.A)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(T=function(){return!!t})()}var P=function(t){function e(t,r){var n,s,u,c;return(0,i.A)(this,e),s=this,u=e,c=[t,A(A({},e.defaultProps),r)],u=(0,o.A)(u),(n=(0,a.A)(s,T()?Reflect.construct(u,c||[],(0,o.A)(s).constructor):u.apply(s,c))).createResources(),n}return(0,s.A)(e,t),(0,n.A)(e,[{key:"createResources",value:function(){var t=this.props,e=t.image,r=t.uniforms;this.texture=new p.A({image:e}),this.drawInfo=(0,h.A)({program:this.createProgram(),uniforms:A(A(A({},r),this.getUniformsFromProps()),{},{uvMatrix:y()(),uImage:(0,v.A)(this.renderer,this.texture),uResolution:[this.width,this.height]}),geometry:this.getGeometry({key:"big-triangle",factory:g.A})}),this.uniforms=this.drawInfo.uniforms,this.updateUvMatrix()}},{key:"getUniformsFromProps",value:function(){return{}}},{key:"createProgram",value:function(){var t=this.props,e=t.programKey,r=t.vert,i=t.frag;return this.getProgram({key:e,factory:function(){return new l.A({vert:r,frag:i})}})}},{key:"onUpdateProps",value:function(t){this.props.programKey!==t.programKey&&(this.releaseResource(t.programKey),this.drawInfo.program=this.createProgram()),(this.props.imageNeedsUpdate||this.props.image!==t.image)&&(this.texture.image=this.props.image,this.texture.needsUpdate=!0,this.props.imageNeedsUpdate=!1),Object.assign(this.uniforms,this.getUniformsFromProps()),this.refresh()}},{key:"render",value:function(){(0,m.A)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){this.uniforms.uResolution[0]=this.width,this.uniforms.uResolution[1]=this.height,this.updateUvMatrix()}},{key:"updateUvMatrix",value:function(){!function(t){var e,r,i=t.matrix,n=void 0===i?[]:i,a=t.containerWidth,o=t.containerHeight,s=t.contentWidth,u=t.contentHeight,c=t.centerX,p=void 0===c?.5:c,h=t.centerY;s/u>a/o?(e=a*u/(o*s),r=1):(e=1,r=o*s/(a*u));var v=(e-1)/2*-1,g=(r-1)/2*-1,l=v+(p-.5)*v*2,m=g+(.5-(void 0===h?.5:h))*g*2;(0,f.i)(n),(0,f.t)(n,n,[l,m]),(0,f.s)(n,n,[e,r])}({matrix:this.drawInfo.material.uniforms.uvMatrix,containerWidth:this.width,containerHeight:this.height,contentWidth:this.props.image.naturalWidth,contentHeight:this.props.image.naturalHeight,centerX:this.props.focalPoint.x,centerY:this.props.focalPoint.y})}}])}(c.A);(0,u.A)(P,"defaultProps",{programKey:null,vert:"\nattribute vec3 aPosition;\nuniform mat3 uvMatrix;\nvarying vec2 vUv;\n\nvoid main(){\n  gl_Position = vec4(aPosition, 1.);\n\n  vec2 uv = gl_Position.xy * .5 + .5;\n\n  vUv = (uvMatrix * vec3(uv, 1.)).xy;\n}\n",frag:"\nuniform sampler2D uImage;\nvarying vec2 vUv;\n\nvoid main(){\n  vec4 tx = texture2D(uImage, vUv);\n  tx.xyz *= tx.a;\n\n  gl_FragColor = tx;\n}\n",image:null,focalPoint:{x:.5,y:.5},uniforms:{},imageNeedsUpdate:!1})},47048:t=>{t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},14302:(t,e,r)=>{"use strict";r.d(e,{F:()=>a,hq:()=>i,py:()=>n});var i="aPosition",n="aNormal",a="aUv"},11561:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(14302),n=r(85579),a=r(84430),o=r(57064);function s(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).position,e=void 0===t?i.hq:t,r=new n.A,s=new Float32Array([-1,-1,-1,3,3,-1]);return(0,a.A)(r,e,new o.A({array:s,itemSize:2})),r}},89500:(t,e,r)=>{"use strict";r.d(e,{i:()=>i,s:()=>a,t:()=>n});var i=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};var n=function(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],p=e[7],h=e[8],v=r[0],g=r[1];return t[0]=i,t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=v*i+g*o+c,t[7]=v*n+g*s+p,t[8]=v*a+g*u+h,t};var a=function(t,e,r){var i=r[0],n=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},82053:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(53222),n="activeTexture";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.get(n)!==e&&(t.gl.activeTexture(i.ey+e),t.set(n,e))}},82614:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(53222);function n(t,e,r){var n="texture-".concat(r);t.get(n)!==e&&(t.gl.bindTexture(i.TS,e),t.set(n,e))}},76329:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(42512),n=r(53222),a=(0,i._)(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.image,a=void 0===r?null:r,o=e.minFilter,s=void 0===o?n._Q:o,u=e.magFilter,c=void 0===u?n._Q:u,p=e.wrapS,h=void 0===p?n.aE:p,v=e.wrapT,g=void 0===v?n.aE:v,l=e.format,m=void 0===l?n.bU:l,f=e.type,d=void 0===f?n.l4:f,y=e.flipY,x=void 0===y||y,A=e.premultiplyAlpha,T=void 0!==A&&A;(0,i.a)(this,t),this.image=a,this.minFilter=s,this.magFilter=c,this.wrapS=h,this.wrapT=g,this.format=m,this.type=d,this.flipY=x,this.premultiplyAlpha=T,this.generateMipmap=this.minFilter!==n._Q&&this.minFilter!==n.te,this.needsUpdate=!1})},65814:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(82053),n=r(82614),a=r(53222);function o(t,e){var r=t.gl;e.image&&r.texImage2D(a.TS,0,e.format,e.format,e.type,e.image),e.generateMipmap&&r.generateMipmap(a.TS)}var s=r(83839);function u(t,e){var r=t.textures,a=r.textureBindings,u=a.get(e);return u||(u=function(){return function(t,e,r){var a=t.gl,u=t.properties.get(e);return(0,i.A)(t.state,r),u.glTexture?((0,n.A)(t.state,u.glTexture,r),!0===e.needsUpdate&&(o(t.state,e,u.glTexture),e.needsUpdate=!1)):(u.glTexture=a.createTexture(),(0,n.A)(t.state,u.glTexture,r),(0,s.A)(a,e),o(t.state,e,u.glTexture)),r}(t,e,r.nextTextureUnit++)},a.set(e,u)),u}},83839:(t,e,r)=>{"use strict";function i(t,e){var r=e.wrapS,i=e.wrapT,n=e.minFilter,a=e.magFilter,o=e.flipY,s=e.premultiplyAlpha;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,o),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)}r.d(e,{A:()=>i})}}]);