"use strict";(globalThis.webpackChunknew_bedford_framework=globalThis.webpackChunknew_bedford_framework||[]).push([[8141],{34663:(t,e,i)=>{i.r(e),i.d(e,{GalleryStrips:()=>w,default:()=>v});var s,r,o,n,a=i(59440),h=i(17228),l=i(82e3),d=i(22902),c=i(67373);class g{constructor(t){let{node:e,imgWrapper:i,img:s}=t;this.node=e,this.image=s,this.imageWrapper=i,this.lightboxLink=null==i?void 0:i.querySelector("a"),this.aspectRatio=(0,d.P6)(this.image),this.node.style.position="absolute"}getWidth(t){return Math.round(this.aspectRatio*t)}setPosition(t,e,i){const s=this.aspectRatio*i;return this.node.style.transform=`matrix(1, 0, 0, 1, ${t}, ${e})`,this.node.style.width=`${Math.round(s)}px`,this.image.style.height=`${i}px`,this.imageWrapper&&(this.imageWrapper.style.height=`${i}px`,this.imageWrapper.style.overflow="hidden"),this.lightboxLink&&(this.lightboxLink.style.height="100%"),{width:s,height:this.node.clientHeight}}}class u extends c.A{constructor(t){super(t);const{container:e,nodes:i,gutter:s,rowTargetHeight:r,isReadyClass:o}=this.props;this.state={gutter:s,rowTargetHeight:r},this.nodes=this.getNodes(i),this.len=this.nodes.length,this.layout(),setTimeout(()=>{e.classList.add(o)},0)}getNodes(t){const{imageWrapperSelector:e,imageSelector:i}=this.props;return t.map(t=>{const s=t.querySelector(e),r=t.querySelectorAll(i)[0];return new g({node:t,imgWrapper:s,img:r})})}positionRow(t,e,i){const{gutter:s}=this.state;let r=0,o=0;for(let n=0,a=t.length;n<a;n+=1){const a=t[n].setPosition(r,e,i);r+=a.width+s,o=Math.max(o,a.height)}return o}setStyles(){const{container:t}=this.props,{gutter:e,rowTargetHeight:i}=this.state,s=t.clientWidth,r=s+e+.25*i,o=[{items:[],rowWidth:0}];let n,a,h=0;for(n=0;n<this.len;n+=1){let t=o[h];const e=this.nodes[n],s=e.getWidth(i);t.rowWidth+s>r&&(o.push({items:[],rowWidth:0}),h+=1,t=o[h]),t.items.push(e),t.rowWidth+=s}let l=0;if(s>500&&o.length>1&&1===o[o.length-1].items.length&&o[o.length-2].items.length>1){const t=o[o.length-1],e=o[o.length-2];e.items.push(t.items[0]),e.rowWidth+=t.items[0].getWidth(i),o.pop()}for(n=0,a=o.length;n<a;n+=1){const t=o[n],r=Math.round((s-e*(t.items.length-1))/t.rowWidth*i);l+=this.positionRow(t.items,l,r)+e}t.style.height=l-e+"px"}layout(t){t&&this.setState({...t}),this.setStyles()}destroy(){}}s=u,r="defaultProps",o={container:document.createElement("div"),nodes:[],imageSelector:"img",gutter:0,rowTargetHeight:300,isReadyClass:"masonry-ready"},(r="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"))?n:n+"")in s?Object.defineProperty(s,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[r]=o;var m=i(52008),p=i(75396),f=i(68651),y=i(63285);function b(t,e,i){return e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class w extends c.A{constructor(t){super(),b(this,"loadImage",t=>{const{imageSelector:e}=this.props,i=t.querySelector(e);i.onload=()=>{t.dataset.loaded=!0},h.A.loadLazy(i,{load:!0,mode:"cover",useAdvancedPositioning:!0})}),b(this,"onLightboxOpen",t=>{const{isHistoryEnabled:e}=this.state;e&&(t.preventDefault(),history.pushState({},"",t.currentTarget.href))}),b(this,"onResize",()=>{this.packer.layout({gutter:(0,d.kr)(this.state.gutter)})}),b(this,"onItemShow",t=>{let{node:e}=t;e.dataset.show||(e.dataset.show=!0)}),b(this,"removeLightboxElementFromDOM",()=>{if(this.state.lightboxEnabled){const t=document.querySelector(`[data-lightbox-section-id="${this.sectionId}"]`);t&&t.remove()}}),b(this,"destroy",()=>{this.unbindListeners(),this.removeLightboxElementFromDOM(),this.stagger.destroy(),this.packer.destroy()}),this.betaFeatureFlags=(0,a.T)(window,"Static.SQUARESPACE_CONTEXT.betaFeatureFlags",[]);const{listSelector:e,itemSelector:i,lightboxLinkSelector:s}=this.props,r=(0,a.T)(window,"Static.SQUARESPACE_CONTEXT.collection.fullUrl",null);let o={};t.dataset.props&&(o=JSON.parse(t.dataset.props)),this.history=(0,l.J)(),this.node=t,this.sectionId=this.node.dataset.sectionId,this.state={design:"strips",collectionFullUrl:r,isHistoryEnabled:r&&this.history,gutter:(0,d.kr)(20),rowHeight:300,lightboxEnabled:!1,width:"full",...o},this.ref={list:this.node.querySelector(e),items:Array.from(this.node.querySelectorAll(i)),lightboxLinks:Array.from(this.node.querySelectorAll(s))},this.onResize=(0,p.A)(this.onResize,y.X0),this.stagger=new m.A({nodes:this.ref.items,onEnter:this.onItemShow}),this.packer=new u({container:this.ref.list,nodes:this.ref.items,imageWrapperSelector:".gallery-strips-item-wrapper",isReadyClass:"gallery-strips-list--ready",gutter:this.state.gutter,rowTargetHeight:this.state.rowHeight}),this.node.dataset.lightbox=this.state.lightboxEnabled,this.loadImages(this.ref.items),this.bindListeners()}loadImages(t){t.forEach(this.loadImage)}bindListeners(){this.ref.lightboxLinks.forEach(t=>{t.addEventListener("click",this.onLightboxOpen)}),f.A.on(this.onResize),this.stagger.start(),this.onResize()}unbindListeners(){this.ref.lightboxLinks.forEach(t=>{t.removeEventListener("click",this.onLightboxOpen)}),f.A.off(this.onResize)}}b(w,"defaultProps",{listSelector:".gallery-strips-wrapper",itemSelector:".gallery-strips-item",lightboxLinkSelector:".gallery-strips-lightbox-link",imageSelector:"img",loadedItemClass:""});const v=t=>new w(t)},52008:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(67279),r=i.n(s),o=i(67373),n=i(49099);function a(t,e,i){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?s:s+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h extends o.A{constructor(t){super(t),a(this,"onNodeEnter",t=>{const{node:e}=t,{delay:i,stagger:s}=this.props;e.__staggerEntered||(e.__staggerEntered=!0,e.__staggerTimeout=setTimeout(()=>{this.props.onEnter(t)},i+this.count*s),this.instant||(this.count+=1,this.count=Math.min(this.props.maxCount,this.count),this.countTimeout()))}),this.state={isActive:!1},this.count=0,this.baseTimeout=null,this.instant=!1,this.viewportWatcher=new(r())}start(){this.state.isActive||(this.setState({isActive:!0}),this.viewportWatcher.addNodes({nodes:this.props.nodes,range:[100,0],callbacks:{onEnter:this.onNodeEnter}}))}countTimeout(){clearTimeout(this.baseTimeout),this.baseTimeout=setTimeout(()=>{this.count=0},10)}destroy(){this.viewportWatcher.destroy(),clearTimeout(this.baseTimeout),this.props.nodes.forEach(t=>{clearTimeout(t.__staggerTimeout)})}}a(h,"defaultProps",{delay:50,stagger:50,maxCount:20,nodes:[],onEnter:n.l})},82e3:(t,e,i)=>{i.d(e,{J:()=>a});const s=Array.prototype.slice,r=function(){const t=s.call(arguments);return function(){let e=s.call(arguments);for(let i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},o=[],n={executeCallbacks(){o.forEach(t=>t())},trigger(){this.executeCallbacks()},registerCallback(t){t&&o.push(t)},removeCallback(t){if(t){const e=o.indexOf(t);e>-1&&o.splice(e,1)}},on(t){this.registerCallback(t)},off(t){this.removeCallback(t)}};window.history&&window.history.pushState&&(history.change=n,history.pushState=r(()=>history.change.trigger(),history.pushState),history.replaceState=r(()=>history.change.trigger(),history.replaceState),window.addEventListener("popstate",()=>{history.change.trigger()}));const a=()=>window.history&&window.history.pushState?history:null},22902:(t,e,i)=>{i.d(e,{P6:()=>r,TT:()=>h,_v:()=>n,kr:()=>o,pG:()=>a});i(68444);var s=i(63285);const r=t=>{if(!t)return 1;if(!t.dataset.imageDimensions){const e=t.getAttribute("width"),i=t.getAttribute("height");return e&&i?+e/+i:1}const e=t.dataset.imageDimensions.split("x");return e[0]&&e[1]?+e[0]/+e[1]:void 0},o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t<=e)return t;const i=window.innerWidth;return i<=s.fi.sm?Math.max(e,Math.round(.25*t)):i<=s.fi.md?Math.max(e,Math.round(.5*t)):i<=s.fi.lg?Math.max(e,Math.round(.75*t)):t},n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=window.innerWidth;let i=Math.max(1,t);return 1===i?i:e<=s.fi.sm?2:e<=s.fi.md?Math.max(Math.ceil(.5*i),2):e<=s.fi.lg?Math.ceil(.75*i):i},a=t=>{let e=0,i=0;const s={width:e,height:i};return t?(t.dataset.imageDimensions?[e,i]=t.dataset.imageDimensions.split("x"):(e=t.getAttribute("width"),i=t.getAttribute("height")),e&&i?{width:+e,height:+i}:s):s},h=t=>{const e={x:.5,y:.5};if(!t)return e;if(!t.dataset.imageFocalPoint)return e;const[i,s]=t.dataset.imageFocalPoint.split(",");return i&&s?{x:+i,y:+s}:e}}}]);